<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculadora de Macros Keto</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1220; --card:#0e1726; --text:#e5e7eb; --muted:#a1a1aa;
      --primary:#0ea5a4; --accent:#22c55e; --border:rgba(255,255,255,.12);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,sans-serif}
    .wrap{max-width:980px;margin:32px auto;padding:0 16px}
    h1{font-size:28px;margin:8px 0 16px;text-align:center}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    label{display:block;margin:12px 0 6px;color:#cbd5e1}
    input,select{width:100%;padding:12px 12px;border-radius:12px;border:1px solid var(--border);background:#0b1220;color:var(--text)}
    .grid{display:grid;gap:12px}
    @media(min-width:800px){.grid.cols-2{grid-template-columns:repeat(2,1fr)}}
    button{padding:14px 18px;border:0;border-radius:12px;background:linear-gradient(135deg,var(--primary),#0f766e);color:#fff;font-weight:800;cursor:pointer}
    button.secondary{background:#111827;color:var(--text);border:1px solid var(--border)}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .result{margin-top:16px;padding:16px;background:#0b1220;border:1px dashed var(--border);border-radius:12px}
    .mini{font-size:12px;color:#9ca3af}
    .kpi{display:grid;gap:10px;grid-template-columns:repeat(3,1fr);margin-top:8px}
    .kpi .box{background:#0b1220;border:1px solid var(--border);border-radius:12px;padding:12px;text-align:center}
    .box h3{margin:0 0 6px;font-size:14px;color:#a7f3d0}
    .big{font-size:20px;font-weight:900}
    .muted{color:#94a3b8}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Calculadora de Macronutrientes <span style="color:#a7f3d0">Keto</span></h1>
    <div class="card">
      <div class="grid cols-2">
        <div>
          <label for="sex">Sexo</label>
          <select id="sex">
            <option value="male">Masculino</option>
            <option value="female">Femenino</option>
          </select>
        </div>
        <div>
          <label for="age">Edad (años)</label>
          <input id="age" type="number" min="10" max="100" placeholder="p. ej. 33">
        </div>
        <div>
          <label for="height">Altura (cm)</label>
          <input id="height" type="number" min="120" max="230" placeholder="p. ej. 170">
        </div>
        <div>
          <label for="weight">Peso (kg)</label>
          <input id="weight" type="number" min="35" max="220" placeholder="p. ej. 72">
        </div>
        <div>
          <label for="goal">Meta</label>
          <select id="goal">
            <option value="loss">Bajar de peso</option>
            <option value="maintain">Mantener</option>
            <option value="gain">Ganar masa</option>
          </select>
        </div>
        <div>
          <label for="train">¿Entrenás pesas?</label>
          <select id="train">
            <option value="no">No</option>
            <option value="yes">Sí, 2–3x o más</option>
          </select>
        </div>
        <div>
          <label for="activity">Actividad diaria (aparte del gym)</label>
          <select id="activity">
            <option value="1.2">Sedentario (1.2)</option>
            <option value="1.375">Ligero: 1–3 días/sem (1.375)</option>
            <option value="1.55">Moderado: 3–5 días/sem (1.55)</option>
            <option value="1.725">Alto: 6–7 días/sem (1.725)</option>
          </select>
        </div>
        <div>
          <label for="carbs">Carbohidratos netos (g/día)</label>
          <input id="carbs" type="number" min="10" max="50" value="25">
          <div class="mini">Sugerido: 20–30 g. Cambialo si te funciona otro número.</div>
        </div>
      </div>

      <div class="row">
        <button id="calc">Calcular macronutrientes</button>
        <button class="secondary" id="clear">Limpiar</button>
      </div>

      <div class="result" id="result" style="display:none">
        <div class="kpi">
          <div class="box"><h3>Calorías objetivo</h3><div class="big" id="kcal">—</div><div class="muted mini" id="kcalinfo"></div></div>
          <div class="box"><h3>Proteína</h3><div class="big" id="prot">—</div><div class="muted mini">g/día</div></div>
          <div class="box"><h3>Carbohidratos netos</h3><div class="big" id="carb">—</div><div class="muted mini">g/día</div></div>
        </div>
        <div class="kpi" style="margin-top:10px">
          <div class="box"><h3>Grasas</h3><div class="big" id="fat">—</div><div class="muted mini">g/día</div></div>
          <div class="box"><h3>% macros</h3><div class="big" id="perc">—</div><div class="muted mini">F / P / C</div></div>
          <div class="box"><h3>Por comida (x3)</h3><div class="big" id="permeal">—</div><div class="muted mini">P / G / C</div></div>
        </div>
        <div class="mini muted" style="margin-top:10px">
          Fórmula BMR: Mifflin–St Jeor. TDEE = BMR × actividad.
          Objetivo calórico: pérdida −20%, mantenimiento 0%, ganancia +10%.
          Proteína: 1.4 g/kg (sin pesas) o 1.8 g/kg (con pesas). Grasas = calorías restantes / 9.
        </div>
      </div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function mifflinStJeor(sex, weight, height, age){
      // Male: (10*kg) + (6.25*cm) - (5*age) + 5
      // Female: (10*kg) + (6.25*cm) - (5*age) - 161
      const base = 10*weight + 6.25*height - 5*age;
      return sex === 'male' ? base + 5 : base - 161;
    }

    function calc(){
      const sex = $('sex').value;
      const age = parseFloat($('age').value);
      const height = parseFloat($('height').value);
      const weight = parseFloat($('weight').value);
      const goal = $('goal').value;
      const train = $('train').value;
      const activity = parseFloat($('activity').value);
      const carbs = Math.max(0, parseFloat($('carbs').value||'25'));

      if([age,height,weight].some(x => isNaN(x) || x<=0)){
        alert('Completá edad, altura y peso con valores válidos.'); return;
      }

      const bmr = mifflinStJeor(sex, weight, height, age);
      const tdee = bmr * activity;

      let target = tdee;
      let info = 'mantenimiento';
      if(goal === 'loss'){ target = tdee * 0.8; info = 'déficit ~20%'; }
      if(goal === 'gain'){ target = tdee * 1.10; info = 'superávit ~10%'; }

      const proteinPerKg = (train === 'yes') ? 1.8 : 1.4;
      const protein = Math.round(proteinPerKg * weight);
      const carb = Math.round(carbs);

      const kcalP = protein * 4;
      const kcalC = carb * 4;
      const kcalLeft = Math.max(0, target - (kcalP + kcalC));
      const fat = Math.round(kcalLeft / 9);

      const kcal = Math.round(target);
      const percF = Math.round((fat*9/kcal)*100);
      const percP = Math.round((protein*4/kcal)*100);
      const percC = Math.round((carb*4/kcal)*100);

      $('kcal').textContent = kcal + ' kcal';
      $('kcalinfo').textContent = info + `  (BMR ${Math.round(bmr)} · TDEE ${Math.round(tdee)})`;
      $('prot').textContent = protein + ' g';
      $('carb').textContent = carb + ' g';
      $('fat').textContent = fat + ' g';
      $('perc').textContent = `${percF}% / ${percP}% / ${percC}%`;
      $('permeal').textContent = `${Math.round(protein/3)} / ${Math.round(fat/3)} / ${Math.round(carb/3)} g`;

      $('result').style.display = 'block';
    }

    $('calc').addEventListener('click', calc);
    $('clear').addEventListener('click', ()=>{
      ['age','height','weight'].forEach(id=>$(id).value='');
      $('goal').value='loss'; $('train').value='no'; $('activity').value='1.2'; $('carbs').value='25';
      $('result').style.display='none';
    });
  </script>
</body>
</html>
